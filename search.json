[{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Description and usage of MsBackendMassbank","text":"Spectra package provides central infrastructure handling Mass Spectrometry (MS) data. package supports interchangeable use different backends import MS data variety sources (mzML files). MsBackendMassbank package allows import handling MS/MS spectrum data Massbank. vignette illustrates usage MsBackendMassbank package include MassBank data MS data analysis workflow Spectra package R.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Description and usage of MsBackendMassbank","text":"package can installed BiocManager package. install BiocManager use install.packages(\"BiocManager\") , , BiocManager::install(\"MsBackendMassbank\") install package.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"importing-msms-data-from-massbank-files","dir":"Articles","previous_headings":"","what":"Importing MS/MS data from MassBank files","title":"Description and usage of MsBackendMassbank","text":"MassBank files (provided Massbank github repository) store normally one library spectrum per file, typically centroided MS level 2. short example , load data file containing multiple library spectra per file files single spectrum provided package. first load required packages define paths Massbank files. MS data can accessed analyzed Spectra objects. create Spectra data mgf files. end provide file names specify use MsBackendMassbank() backend source enable data import. First import single file multiple library spectra. now full access imported spectra variables list . possible multiple files, containing library spectrum. default complete metadata read together spectra. can increase loading time. different metadata blocks can skipped reduces import time. requires define additional data.frame indicating shall read. Besides default spectra variables, msLevel, rtime, precursorMz, also additional spectra variables title spectrum mgf file. addition can also access m/z intensity values spectrum. importing large number mgf files, setting nonStop = TRUE prevents call stop whenever problematic mgf files encountered.","code":"library(Spectra) library(MsBackendMassbank) fls <- dir(system.file(\"extdata\", package = \"MsBackendMassbank\"),            full.names = TRUE, pattern = \"txt$\") fls ## [1] \"/__w/_temp/Library/MsBackendMassbank/extdata/BSU00001.txt\"        ## [2] \"/__w/_temp/Library/MsBackendMassbank/extdata/MassBankRecords.txt\" ## [3] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000501.txt\"        ## [4] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000502.txt\"        ## [5] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000503.txt\"        ## [6] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000511.txt\"        ## [7] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000512.txt\"        ## [8] \"/__w/_temp/Library/MsBackendMassbank/extdata/RP000513.txt\" sps <- Spectra(fls[1],                source = MsBackendMassbank(),                backend = MsBackendDataFrame()) spectraVariables(sps) ##  [1] \"msLevel\"                 \"rtime\"                   ##  [3] \"acquisitionNum\"          \"scanIndex\"               ##  [5] \"dataStorage\"             \"dataOrigin\"              ##  [7] \"centroided\"              \"smoothed\"                ##  [9] \"polarity\"                \"precScanNum\"             ## [11] \"precursorMz\"             \"precursorIntensity\"      ## [13] \"precursorCharge\"         \"collisionEnergy\"         ## [15] \"isolationWindowLowerMz\"  \"isolationWindowTargetMz\" ## [17] \"isolationWindowUpperMz\"  \"acquistionNum\"           ## [19] \"accession\"               \"name\"                    ## [21] \"smiles\"                  \"exactmass\"               ## [23] \"formula\"                 \"inchi\"                   ## [25] \"cas\"                     \"inchikey\"                ## [27] \"adduct\"                  \"splash\"                  ## [29] \"title\" sps <- Spectra(fls[-1],                source = MsBackendMassbank(),                backend = MsBackendDataFrame())  spectraVariables(sps) ##  [1] \"msLevel\"                 \"rtime\"                   ##  [3] \"acquisitionNum\"          \"scanIndex\"               ##  [5] \"dataStorage\"             \"dataOrigin\"              ##  [7] \"centroided\"              \"smoothed\"                ##  [9] \"polarity\"                \"precScanNum\"             ## [11] \"precursorMz\"             \"precursorIntensity\"      ## [13] \"precursorCharge\"         \"collisionEnergy\"         ## [15] \"isolationWindowLowerMz\"  \"isolationWindowTargetMz\" ## [17] \"isolationWindowUpperMz\"  \"acquistionNum\"           ## [19] \"accession\"               \"name\"                    ## [21] \"smiles\"                  \"exactmass\"               ## [23] \"formula\"                 \"inchi\"                   ## [25] \"cas\"                     \"inchikey\"                ## [27] \"adduct\"                  \"splash\"                  ## [29] \"title\" # create data frame to indicate with metadata blocks shall be read. metaDataBlocks <- data.frame(metadata = c(\"ac\", \"ch\", \"sp\", \"ms\",                                           \"record\", \"pk\", \"comment\"),                              read = rep(TRUE, 7))  sps <- Spectra(fls[-1],                source = MsBackendMassbank(),                backeend = MsBackendDataFrame(),                metaBlock = metaDataBlocks)  # all spectraVariables possible in MassBank are read spectraVariables(sps) ##   [1] \"msLevel\"                     \"rtime\"                       ##   [3] \"acquisitionNum\"              \"scanIndex\"                   ##   [5] \"dataStorage\"                 \"dataOrigin\"                  ##   [7] \"centroided\"                  \"smoothed\"                    ##   [9] \"polarity\"                    \"precScanNum\"                 ##  [11] \"precursorMz\"                 \"precursorIntensity\"          ##  [13] \"precursorCharge\"             \"collisionEnergy\"             ##  [15] \"isolationWindowLowerMz\"      \"isolationWindowTargetMz\"     ##  [17] \"isolationWindowUpperMz\"      \"acquistionNum\"               ##  [19] \"accession\"                   \"name\"                        ##  [21] \"smiles\"                      \"exactmass\"                   ##  [23] \"formula\"                     \"inchi\"                       ##  [25] \"cas\"                         \"inchikey\"                    ##  [27] \"adduct\"                      \"splash\"                      ##  [29] \"title\"                       \"instrument\"                  ##  [31] \"instrument_type\"             \"ms_ms_type\"                  ##  [33] \"ms_cap_voltage\"              \"ms_col_gas\"                  ##  [35] \"ms_desolv_gas_flow\"          \"ms_desolv_temp\"              ##  [37] \"ms_frag_mode\"                \"ms_ionization\"               ##  [39] \"ms_ionization_energy\"        \"ms_laser\"                    ##  [41] \"ms_matrix\"                   \"ms_mass_accuracy\"            ##  [43] \"ms_mass_range\"               \"ms_reagent_gas\"              ##  [45] \"ms_resolution\"               \"ms_scan_setting\"             ##  [47] \"ms_source_temp\"              \"ms_kinetic_energy\"           ##  [49] \"ms_electron_current\"         \"ms_reaction_time\"            ##  [51] \"chrom_carrier_gas\"           \"chrom_column\"                ##  [53] \"chrom_column_temp\"           \"chrom_column_temp_gradient\"  ##  [55] \"chrom_flow_gradient\"         \"chrom_flow_rate\"             ##  [57] \"chrom_inj_temp\"              \"chrom_inj_temp_gradient\"     ##  [59] \"chrom_rti_kovats\"            \"chrom_rti_lee\"               ##  [61] \"chrom_rti_naps\"              \"chrom_rti_uoa\"               ##  [63] \"chrom_rti_uoa_pred\"          \"chrom_rt\"                    ##  [65] \"chrom_rt_uoa_pred\"           \"chrom_solvent\"               ##  [67] \"chrom_transfer_temp\"         \"ims_instrument_type\"         ##  [69] \"ims_drift_gas\"               \"ims_drift_time\"              ##  [71] \"ims_ccs\"                     \"general_conc\"                ##  [73] \"compound_class\"              \"link_cayman\"                 ##  [75] \"link_chebi\"                  \"link_chembl\"                 ##  [77] \"link_chempdb\"                \"link_chemspider\"             ##  [79] \"link_comptox\"                \"link_hmdb\"                   ##  [81] \"link_kappaview\"              \"link_kegg\"                   ##  [83] \"link_knapsack\"               \"link_lipidbank\"              ##  [85] \"link_lipidmaps\"              \"link_nikkaji\"                ##  [87] \"link_pubchem\"                \"link_zinc\"                   ##  [89] \"scientific_name\"             \"lineage\"                     ##  [91] \"link\"                        \"sample\"                      ##  [93] \"focus_base_peak\"             \"focus_derivative_form\"       ##  [95] \"focus_derivative_mass\"       \"focus_derivative_type\"       ##  [97] \"focus_ion_type\"              \"data_processing_comment\"     ##  [99] \"data_processing_deprofile\"   \"data_processing_find\"        ## [101] \"data_processing_reanalyze\"   \"data_processing_recalibrate\" ## [103] \"data_processing_whole\"       \"deprecated\"                  ## [105] \"date\"                        \"authors\"                     ## [107] \"license\"                     \"copyright\"                   ## [109] \"publication\"                 \"project\"                     ## [111] \"pknum\"                       \"comment\" # all NA columns can be dropped spectraVariables(dropNaSpectraVariables(sps)) ##  [1] \"msLevel\"                   \"rtime\"                     ##  [3] \"acquisitionNum\"            \"scanIndex\"                 ##  [5] \"dataStorage\"               \"dataOrigin\"                ##  [7] \"centroided\"                \"smoothed\"                  ##  [9] \"polarity\"                  \"precScanNum\"               ## [11] \"precursorMz\"               \"precursorIntensity\"        ## [13] \"precursorCharge\"           \"collisionEnergy\"           ## [15] \"isolationWindowLowerMz\"    \"isolationWindowTargetMz\"   ## [17] \"isolationWindowUpperMz\"    \"acquistionNum\"             ## [19] \"accession\"                 \"name\"                      ## [21] \"smiles\"                    \"exactmass\"                 ## [23] \"formula\"                   \"inchi\"                     ## [25] \"cas\"                       \"inchikey\"                  ## [27] \"adduct\"                    \"splash\"                    ## [29] \"title\"                     \"instrument\"                ## [31] \"instrument_type\"           \"ms_ms_type\"                ## [33] \"ms_frag_mode\"              \"ms_ionization\"             ## [35] \"chrom_column\"              \"chrom_flow_gradient\"       ## [37] \"chrom_flow_rate\"           \"chrom_rt\"                  ## [39] \"chrom_solvent\"             \"compound_class\"            ## [41] \"link_chebi\"                \"link_chemspider\"           ## [43] \"link_comptox\"              \"link_kegg\"                 ## [45] \"link_pubchem\"              \"focus_base_peak\"           ## [47] \"data_processing_reanalyze\" \"data_processing_whole\"     ## [49] \"date\"                      \"authors\"                   ## [51] \"license\"                   \"copyright\"                 ## [53] \"pknum\"                     \"comment\" sps$rtime ##                       rtime  rtime  rtime  rtime  rtime  rtime  ## 142.14 142.14 142.14 142.14 142.14 142.14 143.94 143.94 143.94 sps$title ##                                                       ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 10; R=; [M+H]+\"  ##                                                       ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 20; R=; [M+H]+\"  ##                                                       ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 40; R=; [M+H]+\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 10; R=; [M+H]+\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 20; R=; [M+H]+\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 40; R=; [M+H]+\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 10; R=; [M-H]-\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 20; R=; [M-H]-\"  ##                                                title  ## \"L-Tryptophan; LC-ESI-QTOF; MS2; CE: 40; R=; [M-H]-\" mz(sps) ## NumericList of length 9 ## [[\"\"]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965 ## [[\"\"]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07 ## [[\"\"]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06 ## [[\"mz\"]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965 ## [[\"mz\"]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07 ## [[\"mz\"]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06 ## [[\"mz\"]] 72.0095 116.0517 117.0554 159.0935 186.0558 203.0826 ## [[\"mz\"]] 72.0094 74.0253 116.0511 117.0539 ... 162.0307 186.0548 203.0818 ## [[\"mz\"]] 74.0253 116.0508 intensity(sps) ## NumericList of length 9 ## [[\"\"]] 646 980 2114 20052 1248 7628 2036 494048 75708 ## [[\"\"]] 10186 142 142 750 138 490 126 ... 14266 1478 1600 16504 1446 109762 ## [[\"\"]] 324 184 138 3770 500 800 7214 3238 ... 2802 206 898 162 166 814 250 1840 ## [[\"intensity\"]] 646 980 2114 20052 1248 7628 2036 494048 75708 ## [[\"intensity\"]] 10186 142 142 750 138 490 ... 14266 1478 1600 16504 1446 109762 ## [[\"intensity\"]] 324 184 138 3770 500 800 7214 ... 206 898 162 166 814 250 1840 ## [[\"intensity\"]] 150 200 32 232 80 12162 ## [[\"intensity\"]] 460 3630 658 74 28 190 44 142 50 52 634 ## [[\"intensity\"]] 282 424 sps <- Spectra(fls, source = MsBackendMassbank(), nonStop = TRUE)"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"accessing-the-massbank-mysql-database","dir":"Articles","previous_headings":"","what":"Accessing the MassBank MySQL database","title":"Description and usage of MsBackendMassbank","text":"alternative import MassBank data individual text files (can take considerable amount time) directly access MS/MS data MassBank MySQL database. demonstration purposes using tiny subset MassBank data stored SQLite database within package.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"pre-requisites","dir":"Articles","previous_headings":"Accessing the MassBank MySQL database","what":"Pre-requisites","title":"Description and usage of MsBackendMassbank","text":"present possible directly connect main MassBank production MySQL server, thus, use MsBackendMassbankSql backend required install database locally. MySQL database dump MassBank release can downloaded . dump imported local MySQL server.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"direct-access-to-the-massbank-database","dir":"Articles","previous_headings":"Accessing the MassBank MySQL database","what":"Direct access to the MassBank database","title":"Description and usage of MsBackendMassbank","text":"use MsBackendMassbankSql required first connect MassBank database. show R code used - actual settings (user name, password, database name, host) depend MassBank database installed. illustrate general functionality backend use tiny subset MassBank (release 2020.10) provided small SQLite database within package. connect database. next initialize MsBackendMassbankSql backend supports direct access MassBank SQL database create Spectra object . can now use Spectra object access use MassBank data analysis. Note Spectra object contain data MassBank. data fetched demand database backend. get listing available annotations spectrum (-called spectra variables) can use spectraVariables function. MsBackendMassbankSql can thus access spectra information well annotation. can access core spectra variables, MS level corresponding function msLevel. Spectra variables can also accessed $ name variable. Thus, MS levels can also accessed $msLevel: addition spectra variables, can also get actual peaks (.e. m/z intensity values) mz intensity functions: Note spectra database generated using instrumentation. list number spectra type instrument. next subset data spectra ions generated electro spray ionization (ESI). simple example illustrate Spectra functionality next calculate spectra similarity one spectrum spectra database. end use compareSpectra function normalized dot product similarity function allowing 20 ppm difference m/z matching peaks plot next mirror plot two best matching spectra.  can also retrieve compound information two best matching spectra. Note compounds function works MsBackendMassbankSql backend retrieves corresponding information database’s compound annotation table.","code":"library(RMariaDB) con <- dbConnect(MariaDB(), host = \"localhost\", user = \"massbank\",                  dbname = \"MassBank\") library(RSQLite) con <- dbConnect(SQLite(), system.file(\"sql\", \"minimassbank.sqlite\",                                        package = \"MsBackendMassbank\")) mb <- Spectra(con, source = MsBackendMassbankSql()) mb ## MSn data (Spectra) with 70 spectra in a MsBackendMassbankSql backend: ##       msLevel precursorMz  polarity ##     <integer>   <numeric> <integer> ## 1           2         506         0 ## 2          NA          NA         1 ## 3          NA          NA         0 ## 4          NA          NA         1 ## 5          NA          NA         0 ## ...       ...         ...       ... ## 66          2     185.028         0 ## 67          2     455.290         1 ## 68          2     253.051         0 ## 69          2     358.238         1 ## 70          2     256.170         1 ##  ... 42 more variables/columns. ##  Use  'spectraVariables' to list all of them. spectraVariables(mb) ##  [1] \"msLevel\"                 \"rtime\"                   ##  [3] \"acquisitionNum\"          \"scanIndex\"               ##  [5] \"dataStorage\"             \"dataOrigin\"              ##  [7] \"centroided\"              \"smoothed\"                ##  [9] \"polarity\"                \"precScanNum\"             ## [11] \"precursorMz\"             \"precursorIntensity\"      ## [13] \"precursorCharge\"         \"collisionEnergy\"         ## [15] \"isolationWindowLowerMz\"  \"isolationWindowTargetMz\" ## [17] \"isolationWindowUpperMz\"  \"spectrum_id\"             ## [19] \"spectrum_name\"           \"date\"                    ## [21] \"authors\"                 \"license\"                 ## [23] \"copyright\"               \"publication\"             ## [25] \"splash\"                  \"compound_id\"             ## [27] \"adduct\"                  \"ionization\"              ## [29] \"ionization_voltage\"      \"fragmentation_mode\"      ## [31] \"collision_energy_text\"   \"instrument\"              ## [33] \"instrument_type\"         \"formula\"                 ## [35] \"exactmass\"               \"smiles\"                  ## [37] \"inchi\"                   \"inchikey\"                ## [39] \"cas\"                     \"pubchem\"                 ## [41] \"synonym\"                 \"precursor_mz_text\"       ## [43] \"compound_name\" head(msLevel(mb)) ## [1]  2 NA NA NA NA  2 head(mb$msLevel) ## [1]  2 NA NA NA NA  2 mz(mb) ## NumericList of length 70 ## [[1]] 146.760803 158.863541 174.988785 ... 470.057434 487.989319 585.88446 ## [[2]] 22.99 23.07 23.19 38.98 53.15 60.08 ... 391.18 413.22 414.22 429.16 495.2 ## [[3]] 108.099566 152.005378 153.01824 ... 341.031964 409.06729 499.103447 ## [[4]] 137.0227 138.025605 139.034602 ... 304.271886 316.303106 352.234228 ## [[5]] 112.977759 205.053323 208.041128 ... 449.137152 671.1778 673.200866 ## [[6]] 78.893929 183.011719 193.957916 ... 328.091949 408.010193 426.021942 ## [[7]] 167.03389 168.040758 333.079965 ... 357.073039 365.040698 373.073473 ## [[8]] 195.09167 196.095033 ## [[9]] 108.096149 152.004656 153.01824 ... 359.997563 409.065314 491.043775 ## [[10]] 1278.12 1279.11 1279.18 1306.21 ... 2064.29 2091.32 2092.3 2136.33 ## ... ## <60 more elements> table(mb$instrument_type) ##  ## LC-ESI-ITFT  LC-ESI-QFT   MALDI-TOF  ##           3          50          17 mb <- mb[mb$ionization == \"ESI\"] length(mb) ## [1] 50 library(MsCoreUtils) sims <- compareSpectra(mb[11], mb[-11], FUN = ndotproduct, ppm = 40) max(sims) ## [1] 0.7507467 plotSpectraMirror(mb[11], mb[(which.max(sims) + 1)], ppm = 40) mb_match <- mb[c(11, which.max(sims) + 1)] compounds(mb_match) ## DataFrame with 2 rows and 10 columns ##   compound_id     formula exactmass                 smiles ##     <integer> <character> <numeric>            <character> ## 1          31    C12H10O2   186.068 COC1=C(C=O)C2=CC=CC=.. ## 2          45    C12H10O2   186.068 COC1=CC=C(C=O)C2=CC=.. ##                    inchi               inchikey         cas     pubchem ##              <character>            <character> <character> <character> ## 1 InChI=1S/C12H10O2/c1.. YIQGLTKAOHRZOL-UHFFF..   1/12/5392   CID:79352 ## 2 InChI=1S/C12H10O2/c1.. MVXMNHYVCLMLDD-UHFFF..  15971-29-6   CID:85217 ##                                         synonym                   name ##                                 <CharacterList>            <character> ## 1 2-Methoxy-1-naphthal..,2-methoxynaphthalene.. 2-Methoxy-1-naphthal.. ## 2 4-Methoxy-1-Naphthal..,4-methoxynaphthalene.. 4-Methoxy-1-Naphthal.."},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/articles/MsBackendMassbank.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Description and usage of MsBackendMassbank","text":"","code":"sessionInfo() ## R Under development (unstable) (2023-01-26 r83699) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.1 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C             ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C        ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats4    stats     graphics  grDevices utils     datasets  methods   ## [8] base      ##  ## other attached packages: ## [1] MsCoreUtils_1.11.3      RSQLite_2.2.20          MsBackendMassbank_1.7.3 ## [4] Spectra_1.9.7           ProtGenerics_1.29.1     BiocParallel_1.33.9     ## [7] S4Vectors_0.37.3        BiocGenerics_0.45.0     BiocStyle_2.27.1        ##  ## loaded via a namespace (and not attached): ##  [1] sass_0.4.5          stringi_1.7.12      digest_0.6.31       ##  [4] magrittr_2.0.3      evaluate_0.20       bookdown_0.32       ##  [7] fastmap_1.1.0       blob_1.2.3          rprojroot_2.0.3     ## [10] jsonlite_1.8.4      DBI_1.1.3           BiocManager_1.30.19 ## [13] purrr_1.0.1         codetools_0.2-18    textshaping_0.3.6   ## [16] jquerylib_0.1.4     cli_3.6.0           rlang_1.0.6         ## [19] bit64_4.0.5         cachem_1.0.6        yaml_2.3.7          ## [22] tools_4.3.0         parallel_4.3.0      memoise_2.0.1       ## [25] vctrs_0.5.2         R6_2.5.1            lifecycle_1.0.3     ## [28] stringr_1.5.0       fs_1.6.0            IRanges_2.33.0      ## [31] bit_4.0.5           clue_0.3-63         MASS_7.3-58.2       ## [34] ragg_1.2.5          cluster_2.1.4       pkgconfig_2.0.3     ## [37] desc_1.4.2          pkgdown_2.0.7.9000  bslib_0.4.2         ## [40] glue_1.6.2          Rcpp_1.0.10         systemfonts_1.0.4   ## [43] highr_0.10          xfun_0.36           knitr_1.42          ## [46] htmltools_0.5.4     rmarkdown_2.20      compiler_4.3.0"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"RforMassSpectrometry Package Maintainer. Maintainer. Michael Witting. Author. Johannes Rainer. Author. Michael Stravs. Contributor.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Witting M, Rainer J (2023). MsBackendMassbank: Mass Spectrometry Data Backend MassBank record Files. R package version 1.7.3, https://github.com/RforMassSpectrometry/MsBackendMassbank.","code":"@Manual{,   title = {MsBackendMassbank: Mass Spectrometry Data Backend for MassBank record Files},   author = {Michael Witting and Johannes Rainer},   year = {2023},   note = {R package version 1.7.3},   url = {https://github.com/RforMassSpectrometry/MsBackendMassbank}, }"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/index.html","id":"mass-spectrometry-data-backend-for-massbank-files","dir":"","previous_headings":"","what":"Mass Spectrometry Data Backend for MassBank record Files","title":"Mass Spectrometry Data Backend for MassBank record Files","text":"MsBackendMassbank package provides functionality import handle MS/MS spectrum data Massbank files directly access MassBank SQL database. package defines MsBackendMassbank MsBackendMassbankSql backends can used import use MS2 spectrum data mgf files respectively MySQL databases Spectra R package. information see package homepage.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":null,"dir":"Reference","previous_headings":"","what":"MS data backend for mgf files — MsBackendMassbank","title":"MS data backend for mgf files — MsBackendMassbank","text":"MsBackendMassbank class supports import MS/MS spectra data MS/MS spectrum data Massbank files. initial import, full MS data kept memory. MsBackendMassbank extends MsBackendDataFrame() backend directly supports thus applyProcessing() function make data manipulations persistent. New objects created MsBackendMassbank function. backendInitialize method subsequently called initialize object import MS/MS data (one ) MassBank files. Optional parameter nonStop allows specify whether import returns error one text files lacks required data, mz intensity values (default nonStop = FALSE), whether affected file(s) () skipped warning shown (nonStop = TRUE). Note error abort import regardless parameter nonStop.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MS data backend for mgf files — MsBackendMassbank","text":"","code":"# S4 method for MsBackendMassbank backendInitialize(   object,   files,   metaBlocks = metaDataBlocks(),   nonStop = FALSE,   ...,   BPPARAM = bpparam() )  MsBackendMassbank()  # S4 method for MsBackendMassbank spectraVariableMapping(object, format = c(\"Massbank\"))  # S4 method for MsBackendMassbank export(   object,   x,   file = tempfile(),   mapping = spectraVariableMapping(MsBackendMassbank()),   ... )"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MS data backend for mgf files — MsBackendMassbank","text":"object Instance MsBackendMassbank class. files character (full) file name(s) MassBank file(s) MS/MS data imported. metaBlocks data.frame indicating metadata shall imported. Default metaDataBlocks(). nonStop logical(1) whether import stopped xml file contain required fields. Defaults nonStop = FALSE. ... Currently ignored. BPPARAM Parameter object defining parallel processing setup import data parallel. Defaults BPPARAM = bpparam(). See bpparam() information. format spectraVariableMapping: character(1) defining format used. Currently format = \"Massbank\" supported. x Spectra() object exported. file export: character(1) defining output file. mapping export: named character vector allowing specify fields Massbank file renamed. Names supposed spectra variable name values vector field names Massbank file. See output spectraVariableMapping(MsBackendMassbank()) expected format.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MS data backend for mgf files — MsBackendMassbank","text":"backendInitialize MsBackendMassbank return instance MsBackendMassbank-class.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"MS data backend for mgf files — MsBackendMassbank","text":"Michael Witting","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbank.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MS data backend for mgf files — MsBackendMassbank","text":"","code":"## Create an MsBackendMassbank backend and import data from a test file. fls <- dir(system.file(\"extdata\", package = \"MsBackendMassbank\"),     full.names = TRUE, pattern = \"txt$\") be <- backendInitialize(MsBackendMassbank(), fls) #> Start data import from 8 files ...  #> done be #> MsBackendMassbank with 10 spectra #>      msLevel     rtime scanIndex #>    <integer> <numeric> <integer> #> 1          2        NA         1 #> 2          2    142.14         1 #> 3          2    142.14         1 #> 4          2    142.14         1 #> 5          2    142.14         1 #> 6          2    142.14         1 #> 7          2    142.14         1 #> 8          2    143.94         1 #> 9          2    143.94         1 #> 10         2    143.94         1 #>  ... 28 more variables/columns.  be$msLevel #>  [1] 2 2 2 2 2 2 2 2 2 2 be$intensity #> NumericList of length 10 #> [[\"intensity\"]] 12461 2208 2394 40390 2816 3122 ... 6937 2914 6059 1871 9233 #> [[\"\"]] 646 980 2114 20052 1248 7628 2036 494048 75708 #> [[\"\"]] 10186 142 142 750 138 490 126 ... 14266 1478 1600 16504 1446 109762 #> [[\"\"]] 324 184 138 3770 500 800 7214 3238 ... 2802 206 898 162 166 814 250 1840 #> [[\"intensity\"]] 646 980 2114 20052 1248 7628 2036 494048 75708 #> [[\"intensity\"]] 10186 142 142 750 138 490 ... 14266 1478 1600 16504 1446 109762 #> [[\"intensity\"]] 324 184 138 3770 500 800 7214 ... 206 898 162 166 814 250 1840 #> [[\"intensity\"]] 150 200 32 232 80 12162 #> [[\"intensity\"]] 460 3630 658 74 28 190 44 142 50 52 634 #> [[\"intensity\"]] 282 424 be$mz #> NumericList of length 10 #> [[\"mz\"]] 84.1 105.1 107.1 114.1 115.1 119.1 ... 393.3 396.3 410.3 411.3 414.3 #> [[\"\"]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965 #> [[\"\"]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07 #> [[\"\"]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06 #> [[\"mz\"]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965 #> [[\"mz\"]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07 #> [[\"mz\"]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06 #> [[\"mz\"]] 72.0095 116.0517 117.0554 159.0935 186.0558 203.0826 #> [[\"mz\"]] 72.0094 74.0253 116.0511 117.0539 ... 162.0307 186.0548 203.0818 #> [[\"mz\"]] 74.0253 116.0508  ## Initializing a backend reading additional metadata columns/information mb <- metaDataBlocks() mb #>   metadata  read #> 1       ac FALSE #> 2       ch FALSE #> 3       sp FALSE #> 4       ms FALSE #> 5   record FALSE #> 6       pk FALSE #> 7  comment FALSE mb[1, 2] <- TRUE  be <- backendInitialize(MsBackendMassbank(), fls, metaBlocks = mb) #> Start data import from 8 files ...  #> done spectraVariables(be) #>  [1] \"msLevel\"                    \"rtime\"                      #>  [3] \"acquisitionNum\"             \"scanIndex\"                  #>  [5] \"mz\"                         \"intensity\"                  #>  [7] \"dataStorage\"                \"dataOrigin\"                 #>  [9] \"centroided\"                 \"smoothed\"                   #> [11] \"polarity\"                   \"precScanNum\"                #> [13] \"precursorMz\"                \"precursorIntensity\"         #> [15] \"precursorCharge\"            \"collisionEnergy\"            #> [17] \"isolationWindowLowerMz\"     \"isolationWindowTargetMz\"    #> [19] \"isolationWindowUpperMz\"     \"acquistionNum\"              #> [21] \"accession\"                  \"name\"                       #> [23] \"smiles\"                     \"exactmass\"                  #> [25] \"formula\"                    \"inchi\"                      #> [27] \"cas\"                        \"inchikey\"                   #> [29] \"adduct\"                     \"splash\"                     #> [31] \"title\"                      \"instrument\"                 #> [33] \"instrument_type\"            \"ms_ms_type\"                 #> [35] \"ms_cap_voltage\"             \"ms_col_gas\"                 #> [37] \"ms_desolv_gas_flow\"         \"ms_desolv_temp\"             #> [39] \"ms_frag_mode\"               \"ms_ionization\"              #> [41] \"ms_ionization_energy\"       \"ms_laser\"                   #> [43] \"ms_matrix\"                  \"ms_mass_accuracy\"           #> [45] \"ms_mass_range\"              \"ms_reagent_gas\"             #> [47] \"ms_resolution\"              \"ms_scan_setting\"            #> [49] \"ms_source_temp\"             \"ms_kinetic_energy\"          #> [51] \"ms_electron_current\"        \"ms_reaction_time\"           #> [53] \"chrom_carrier_gas\"          \"chrom_column\"               #> [55] \"chrom_column_temp\"          \"chrom_column_temp_gradient\" #> [57] \"chrom_flow_gradient\"        \"chrom_flow_rate\"            #> [59] \"chrom_inj_temp\"             \"chrom_inj_temp_gradient\"    #> [61] \"chrom_rti_kovats\"           \"chrom_rti_lee\"              #> [63] \"chrom_rti_naps\"             \"chrom_rti_uoa\"              #> [65] \"chrom_rti_uoa_pred\"         \"chrom_rt\"                   #> [67] \"chrom_rt_uoa_pred\"          \"chrom_solvent\"              #> [69] \"chrom_transfer_temp\"        \"ims_instrument_type\"        #> [71] \"ims_drift_gas\"              \"ims_drift_time\"             #> [73] \"ims_ccs\"                    \"general_conc\"               be$instrument #>                                instrument  #>                   \"Bruker maXis ESI-QTOF\"  #>                                            #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                            #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                            #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\"  #>                                instrument  #> \"maXis plus UHR-ToF-MS, Bruker Daltonics\""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":null,"dir":"Reference","previous_headings":"","what":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"MsBackendMassbankSql provides access mass spectrometry data MassBank directly accessing MySQL/MariaDb database. addition supports adding new spectra variables locally changing spectra variables provided MassBank (without changing original values database). Note MsBackendMassbankSql requires local installation MassBank database since direct database access supported main MassBank instance. Also, fields MassBank database directly compatible Spectra, collision energy available numeric value. collision energy available MassBank reported spectra variable \"collision_energy_text\". Also, precursor m/z values reported spectra can converted numeric hence NA reported spectra variable precursorMz spectra. variable \"precursor_mz_text\" can used get original precursor m/z reported MassBank.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"","code":"MsBackendMassbankSql()  # S4 method for MsBackendMassbankSql backendInitialize(object, dbcon, ...)  # S4 method for MsBackendMassbankSql peaksData(object, columns = peaksVariables(object))  # S4 method for MsBackendMassbankSql dataStorage(object)  # S4 method for MsBackendMassbankSql intensity(object) <- value  # S4 method for MsBackendMassbankSql mz(object) <- value  # S4 method for MsBackendMassbankSql reset(object)  # S4 method for MsBackendMassbankSql spectraData(object, columns = spectraVariables(object))  # S4 method for MsBackendMassbankSql spectraNames(object)  # S4 method for MsBackendMassbankSql spectraNames(object) <- value  # S4 method for MsBackendMassbankSql tic(object, initial = TRUE)  # S4 method for MsBackendMassbankSql [(x, i, j, ..., drop = FALSE)  # S4 method for Spectra compounds(object, ...)  # S4 method for MsBackendMassbankSql compounds(object, ...)  # S4 method for MsBackendMassbankSql $(x, name) <- value  # S4 method for MsBackendMassbankSql precScanNum(object)"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"object Object extending MsBackendMassbankSql. dbcon backendInitialize,MsBackendMassbankSql: SQL database connection MassBank (MariaDb) database. ... Additional arguments. columns spectraData accessor: optional character column names (spectra variables) included returned DataFrame. default, columns returned. peaksData accessor: optional character requested columns individual matrix returned list. Use peaksVariables(object) supported columns. value replacement value <- methods. See individual method description expected data type. initial tic: logical(1) whether initially reported total ion current reported, whether total ion current (re)calculated actual data (initial = FALSE). x Object extending MsBackendMassbankSql. [: integer, logical character subset object. j [: supported. drop [: considered. name name variable replace <- methods. See individual method description expected data type. spectraVariables selectSpectraVariables: character names spectra variables backend subsetted.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"See documentation respective function.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"supported-backend-functions","dir":"Reference","previous_headings":"","what":"Supported Backend functions","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"following functions supported MsBackendMassbankSqlMassbankDb. [: subset backend. subsetting element (row/) allowed $, $<-: access set/add single spectrum variable (column) backend. acquisitionNum: returns acquisition number spectrum. Returns integer length equal number spectra (NA_integer_ available). peaksData returns list spectras' peak data. length list equal number spectra object. element list matrix columns \"mz\" \"intensity\". empty spectrum, matrix 0 rows two columns (named mz intensity) returned. Parameter columns allows select peaks variables return, supports currently \"mz\" \"intensity\". backendInitialize: initialises backend retrieving IDs spectra database. Parameter dbcon connection MassBank MySQL database required. dataOrigin: gets character length equal number spectra object data origin spectrum. e.g. mzML file data read. dataStorage: returns \"<MassBank>\" spectra. centroided, centroided<-: gets sets centroiding information spectra. centroided returns logical vector length equal number spectra TRUE spectrum centroided, FALSE profile mode NA undefined. See also isCentroided estimating spectrum data whether spectrum centroided.  value centroided<- either single logical logical length equal number spectra object. collisionEnergy, collisionEnergy<-: gets sets collision energy spectra object. collisionEnergy returns numeric length equal number spectra (NA_real_ present/defined), collisionEnergy<- takes numeric length equal number spectra object. Note collision energy description MassBank provided spectra variable \"collisionEnergyText\". intensity: gets intensity values spectra. Returns NumericList() numeric vectors (intensity values spectrum). length list equal number spectra object. ionCount: returns numeric sum intensities spectrum. spectrum empty (see isEmpty), NA_real_ returned. isCentroided: heuristic approach assessing spectra object profile centroided mode. function takes qtl th quantile top peaks, calculates difference adjacent m/z value returns TRUE first quartile greater k. (See Spectra:::.isCentroided code.) isEmpty: checks whether spectrum object empty (.e. contain peaks). Returns logical vector length equal number spectra. isolationWindowLowerMz, isolationWindowLowerMz<-: gets sets lower m/z boundary isolation window. isolationWindowTargetMz, isolationWindowTargetMz<-: gets sets target m/z isolation window. isolationWindowUpperMz, isolationWindowUpperMz<-: gets sets upper m/z boundary isolation window. isReadOnly: returns logical(1) whether backend read allow also write/update data. length: returns number spectra object. lengths: gets number peaks (m/z-intensity values) per spectrum.  Returns integer vector (length equal number spectra). empty spectra, 0 returned. msLevel: gets spectra's MS level. Returns integer vector (length equal number spectra) MS level spectrum (NA_integer_ available). mz: gets mass--charge ratios (m/z) spectra. Returns NumericList() length equal number spectra, element numeric vector m/z values one spectrum. polarity, polarity<-: gets sets polarity spectrum.  polarity returns integer vector (length equal number spectra), 0 1 representing negative positive polarities, respectively. polarity<- expects integer vector length 1 equal number spectra. precursorCharge, precursorIntensity, precursorMz, precScanNum, precAcquisitionNum: get charge (integer), intensity (numeric), m/z (numeric), scan index (integer) acquisition number (interger) precursor MS level 2 spectra object. Returns vector length equal number spectra object. NA reported MS1 spectra precursor information available. reset: restores backend original state, .e. deletes locally modified data reinitializes backend full data available database. rtime, rtime<-: gets sets retention times spectrum (seconds). rtime returns numeric vector (length equal number spectra) retention time spectrum. rtime<- expects numeric vector length equal number spectra. scanIndex: returns integer vector scan index spectrum. represents relative index spectrum within file. Note can different acquisitionNum spectrum index spectrum reported mzML file. selectSpectraVariables: reduces information within backend selected spectra variables. smoothed,smoothed<-: gets sets whether spectrum smoothed. smoothed returns logical vector length equal number spectra. smoothed<- takes logical vector length 1 equal number spectra object. spectraData: gets general spectrum metadata (annotation, also called header).  spectraData returns DataFrame. Note replacing spectra data spectraData<- supported. spectraNames: returns character vector names spectra object. spectraVariables: returns character vector available spectra variables (columns, fields attributes) available object. return spectra variables present object, also \"mz\" \"intensity\" (default returned spectraVariables,Spectra method). tic: gets total ion current/count (sum signal spectrum) spectra object. default, value reported original raw data file returned. empty spectrum, NA_real_ returned.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"not-supported-backend-functions","dir":"Reference","previous_headings":"","what":"Not supported Backend functions","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"following functions supported MsBackendMassbankSql since original data can changed. backendMerge, export, filterDataStorage, filterPrecursorScan, peaksData<-, filterAcquisitionNum, intensity<-, mz<-, precScanNum, spectraData<-, spectraNames<-.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"retrieving-compound-annotations-for-spectra","dir":"Reference","previous_headings":"","what":"Retrieving compound annotations for spectra","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"compound annotations also provided via spectraVariables backend, also possible use compounds function Spectra object (uses MsBackendMassbankSql backend) retrieve compound annotations specific spectra.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"Johannes Rainer","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/MsBackendMassbankSql.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MS backend accessing the MassBank MySQL database — MsBackendMassbankSql","text":"","code":"## Create a connection to a database with MassBank data - in the present ## example we connect to a tiny SQLite database bundled in this package ## as public access to the MassBank MySQL is not (yet) supported. See the ## vignette for more information on how to install MassBank locally and ## enable MySQL database connections library(RSQLite) con <- dbConnect(SQLite(), system.file(\"sql\", \"minimassbank.sqlite\",     package = \"MsBackendMassbank\"))  ## Given that we have the connection to a MassBank databas we can ## initialize the backend: be <- backendInitialize(MsBackendMassbankSql(), dbcon = con) be #> MsBackendMassbankSql with 70 spectra #>       msLevel precursorMz  polarity #>     <integer>   <numeric> <integer> #> 1           2         506         0 #> 2          NA          NA         1 #> 3          NA          NA         0 #> 4          NA          NA         1 #> 5          NA          NA         0 #> ...       ...         ...       ... #> 66          2     185.028         0 #> 67          2     455.290         1 #> 68          2     253.051         0 #> 69          2     358.238         1 #> 70          2     256.170         1 #>  ... 42 more variables/columns. #>  Use  'spectraVariables' to list all of them.  ## Access MS level msLevel(be) #>  [1]  2 NA NA NA NA  2 NA NA NA NA NA NA NA NA NA NA NA NA NA NA  2  2  2  2  2 #> [26]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2 #> [51]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2 be$msLevel #>  [1]  2 NA NA NA NA  2 NA NA NA NA NA NA NA NA NA NA NA NA NA NA  2  2  2  2  2 #> [26]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2 #> [51]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  ## Access m/z values be$mz #> NumericList of length 70 #> [[1]] 146.760803 158.863541 174.988785 ... 470.057434 487.989319 585.88446 #> [[2]] 22.99 23.07 23.19 38.98 53.15 60.08 ... 391.18 413.22 414.22 429.16 495.2 #> [[3]] 108.099566 152.005378 153.01824 ... 341.031964 409.06729 499.103447 #> [[4]] 137.0227 138.025605 139.034602 ... 304.271886 316.303106 352.234228 #> [[5]] 112.977759 205.053323 208.041128 ... 449.137152 671.1778 673.200866 #> [[6]] 78.893929 183.011719 193.957916 ... 328.091949 408.010193 426.021942 #> [[7]] 167.03389 168.040758 333.079965 ... 357.073039 365.040698 373.073473 #> [[8]] 195.09167 196.095033 #> [[9]] 108.096149 152.004656 153.01824 ... 359.997563 409.065314 491.043775 #> [[10]] 1278.12 1279.11 1279.18 1306.21 ... 2064.29 2091.32 2092.3 2136.33 #> ... #> <60 more elements>  ## Access the full spectra data (including m/z and intensity values) spectraData(be) #> DataFrame with 70 rows and 45 columns #>       msLevel     rtime acquisitionNum scanIndex                             mz #>     <integer> <numeric>      <integer> <integer>                  <NumericList> #> 1           2        NA             NA        NA    146.761,158.864,174.989,... #> 2          NA        NA             NA        NA          22.99,23.07,23.19,... #> 3          NA        NA             NA        NA    108.100,152.005,153.018,... #> 4          NA        NA             NA        NA    137.023,138.026,139.035,... #> 5          NA        NA             NA        NA    112.978,205.053,208.041,... #> ...       ...       ...            ...       ...                            ... #> 66          2        NA             NA        NA                        185.028 #> 67          2        NA             NA        NA    58.0653,77.0386,79.0543,... #> 68          2        NA             NA        NA    132.021,133.029,135.009,... #> 69          2        NA             NA        NA    53.0388,54.0340,55.0544,... #> 70          2        NA             NA        NA  88.0757,151.0540,152.0620,... #>                                intensity dataStorage  dataOrigin centroided #>                            <NumericList> <character> <character>  <logical> #> 1     0.980184,938.145447, 56.718353,...  <MassBank>          NA         NA #> 2                     3173,2266, 880,...  <MassBank>          NA         NA #> 3                 2809,119550, 91935,...  <MassBank>          NA         NA #> 4               157703, 23566,  5190,...  <MassBank>          NA         NA #> 5                     5686, 927, 756,...  <MassBank>          NA         NA #> ...                                  ...         ...         ...        ... #> 66                              34967548  <MassBank>          NA         NA #> 67           9143284, 341391,5278218,...  <MassBank>          NA         NA #> 68         82825.8,290504.6,301494.3,...  <MassBank>          NA         NA #> 69         1568742,19224644, 4676170,...  <MassBank>          NA         NA #> 70          678846,  403851,11111366,...  <MassBank>          NA         NA #>      smoothed  polarity precScanNum precursorMz precursorIntensity #>     <logical> <integer>   <integer>   <numeric>          <numeric> #> 1          NA         0          NA         506                408 #> 2          NA         1          NA          NA                 NA #> 3          NA         0          NA          NA                 NA #> 4          NA         1          NA          NA                 NA #> 5          NA         0          NA          NA                 NA #> ...       ...       ...         ...         ...                ... #> 66         NA         0          NA     185.028            185.028 #> 67         NA         1          NA     455.290            455.290 #> 68         NA         0          NA     253.051            253.051 #> 69         NA         1          NA     358.238            358.237 #> 70         NA         1          NA     256.170            256.169 #>     precursorCharge collisionEnergy isolationWindowLowerMz #>           <integer>       <numeric>              <numeric> #> 1                NA              NA                     NA #> 2                NA              NA                     NA #> 3                NA              NA                     NA #> 4                NA              NA                     NA #> 5                NA              NA                     NA #> ...             ...             ...                    ... #> 66               NA              NA                     NA #> 67               NA              NA                     NA #> 68               NA              NA                     NA #> 69               NA              NA                     NA #> 70               NA              NA                     NA #>     isolationWindowTargetMz isolationWindowUpperMz spectrum_id #>                   <numeric>              <numeric> <character> #> 1                        NA                     NA    MCH00020 #> 2                        NA                     NA    MCH00002 #> 3                        NA                     NA    MCH00006 #> 4                        NA                     NA    MCH00009 #> 5                        NA                     NA    MCH00014 #> ...                     ...                    ...         ... #> 66                       NA                     NA    SM834451 #> 67                       NA                     NA    SM855703 #> 68                       NA                     NA    SM882851 #> 69                       NA                     NA    SM849703 #> 70                       NA                     NA    SM858801 #>              spectrum_name                   date                authors #>                <character>            <character>            <character> #> 1   Adenosine 5'-triphos.. 2016.01.19 (Created .. Yoshikuni K, Tajiri .. #> 2   Gentisic acid; MALDI.. 2016.01.19 (Created .. Wada Y, Osaka Medica.. #> 3   Gentisic acid; MALDI.. 2016.01.19 (Created .. Wada Y, Osaka Medica.. #> 4   5-Methoxysalicylic a.. 2016.01.19 (Created .. Wada Y, Osaka Medica.. #> 5   Sinapic acid; MALDI-.. 2016.01.19 (Created .. Wada Y, Osaka Medica.. #> ...                    ...                    ...                    ... #> 66  m-Xylene-4-sulfonic ..             2016.12.12 Krauss M, Schymanski.. #> 67  Verapamil; LC-ESI-QF..             2016.12.12 Krauss M, Schymanski.. #> 68  Daidzein; LC-ESI-QFT..             2016.12.12 Krauss M, Schymanski.. #> 69  Oxybutynin; LC-ESI-Q..             2016.12.12 Krauss M, Schymanski.. #> 70  Diphenhydramine; LC-.. 2019.11.20 (Created .. Krauss M, Schymanski.. #>         license              copyright            publication #>     <character>            <character>            <character> #> 1      CC BY-SA                     NA                     NA #> 2      CC BY-SA                     NA                     NA #> 3      CC BY-SA                     NA                     NA #> 4      CC BY-SA                     NA                     NA #> 5      CC BY-SA                     NA                     NA #> ...         ...                    ...                    ... #> 66        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R.. #> 67        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R.. #> 68        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R.. #> 69        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R.. #> 70        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R.. #>                     splash compound_id      adduct  ionization #>                <character>   <integer> <character> <character> #> 1   splash10-0a4i-000090..           1      [M-H]-          NA #> 2   splash10-004r-191300..           2          NA          NA #> 3   splash10-0udi-090200..           3          NA          NA #> 4   splash10-0fri-093000..           4          NA          NA #> 5   splash10-006t-019080..           5          NA          NA #> ...                    ...         ...         ...         ... #> 66  splash10-000i-090000..          66      [M-H]-         ESI #> 67  splash10-066r-090030..          67      [M+H]+         ESI #> 68  splash10-0udi-009000..          68      [M-H]-         ESI #> 69  splash10-0a4i-860900..          69      [M+H]+         ESI #> 70  splash10-014i-090000..          70      [M+H]+         ESI #>     ionization_voltage fragmentation_mode collision_energy_text #>            <character>        <character>           <character> #> 1                   NA                 NA                    NA #> 2                   NA                 NA                    NA #> 3                   NA                 NA                    NA #> 4                   NA                 NA                    NA #> 5                   NA                 NA                    NA #> ...                ...                ...                   ... #> 66                  NA                HCD         35  (nominal) #> 67                  NA                HCD         35  (nominal) #> 68                  NA                HCD         35  (nominal) #> 69                  NA                HCD         35  (nominal) #> 70                  NA                HCD         35  (nominal) #>                 instrument instrument_type       formula exactmass #>                <character>     <character>   <character> <numeric> #> 1   LTQ Orbitrap XL, The..     LC-ESI-ITFT C10H16N5O13P3   506.996 #> 2   Voyager DE-PRO, Appl..       MALDI-TOF        C7H6O4   154.027 #> 3   Voyager DE-PRO, Appl..       MALDI-TOF        C7H6O4   154.027 #> 4   Voyager DE-PRO, Appl..       MALDI-TOF        C8H8O4   168.042 #> 5   Voyager DE-PRO, Appl..       MALDI-TOF      C11H12O5   224.068 #> ...                    ...             ...           ...       ... #> 66  Q Exactive Plus Orbi..      LC-ESI-QFT      C8H10O3S   186.035 #> 67  Q Exactive Plus Orbi..      LC-ESI-QFT    C27H38N2O4   454.283 #> 68  Q Exactive Plus Orbi..      LC-ESI-QFT      C15H10O4   254.058 #> 69  Q Exactive Plus Orbi..      LC-ESI-QFT     C22H31NO3   357.230 #> 70  Q Exactive Plus Orbi..      LC-ESI-QFT      C17H21NO   255.162 #>                     smiles                  inchi               inchikey #>                <character>            <character>            <character> #> 1   Nc(n3)c(n2)c(nc3)n(c.. InChI=1S/C10H16N5O13.. ZKHQWZAMYRWXGA-KQYNX.. #> 2   Oc(c1)cc(C(O)=O)c(O)c1 InChI=1S/C7H6O4/c8-4.. WXTMDXOMEHJXQO-UHFFF.. #> 3   Oc(c1)cc(C(O)=O)c(O)c1 InChI=1S/C7H6O4/c8-4.. WXTMDXOMEHJXQO-UHFFF.. #> 4   COc(c1)cc(C(O)=O)c(O.. InChI=1S/C8H8O4/c1-1.. IZZIWIAOVZOBLF-UHFFF.. #> 5   COC1=CC(=CC(=C1O)OC).. InChI=1S/C11H12O5/c1.. PCMORTLOPMLEFB-ONEGZ.. #> ...                    ...                    ...                    ... #> 66  Cc1ccc(c(c1)C)S(=O)(.. InChI=1S/C8H10O3S/c1.. CHZLVSBMXZSPNN-UHFFF.. #> 67  COc1ccc(CCN(C)CCCC(C.. InChI=1S/C27H38N2O4/.. SGTNSNPWRIOYBX-UHFFF.. #> 68  OC1=CC=C(C=C1)C1=COC.. InChI=1S/C15H10O4/c1.. ZQSIJRDFPHDXIC-UHFFF.. #> 69  CCN(CC)CC#CCOC(=O)C(.. InChI=1S/C22H31NO3/c.. XIQVNETUBQGFHX-UHFFF.. #> 70  CN(C)CCOC(c1ccccc1)c.. InChI=1S/C17H21NO/c1.. ZZVUWRFHKOJYTH-UHFFF.. #>             cas     pubchem #>     <character> <character> #> 1       56-65-5    CID:5957 #> 2            NA    CID:3469 #> 3            NA    CID:3469 #> 4            NA   CID:75787 #> 5      530-59-6  CID:637775 #> ...         ...         ... #> 66      88-61-9    CID:6938 #> 67      52-53-9    CID:2520 #> 68     486-66-8 CID:5281708 #> 69    5633-20-5    CID:4634 #> 70      58-73-1    CID:3100 #>                                                        synonym #>                                                <CharacterList> #> 1                                   Adenosine 5'-triphos..,ATP #> 2                         2,5-Dihydroxybenzoic..,Gentisic acid #> 3                     2,5-Dihydroxybenzoic..,DHB,Gentisic acid #> 4                      5-Methoxysalicylic a..,DHBs (Super DHB) #> 5   Sinapic acid,3,5-dimethoxy-4-hydr..,3-(4-hydroxy-3,5-dim.. #> ...                                                        ... #> 66               m-Xylene-4-sulfonic ..,2,4-dimethylbenzenes.. #> 67                            Verapamil,2-(3,4-dimethoxyphen.. #> 68                             Daidzein,7-hydroxy-3-(4-hydro.. #> 69                           Oxybutynin,4-(diethylamino)but-.. #> 70                      Diphenhydramine,2-benzhydryloxy-N,N-.. #>     precursor_mz_text          compound_name #>           <character>            <character> #> 1          506.000000 Adenosine 5'-triphos.. #> 2                  NA 2,5-Dihydroxybenzoic.. #> 3                  NA 2,5-Dihydroxybenzoic.. #> 4                  NA 5-Methoxysalicylic a.. #> 5                  NA           Sinapic acid #> ...               ...                    ... #> 66           185.0278 m-Xylene-4-sulfonic .. #> 67           455.2904              Verapamil #> 68           253.0506               Daidzein #> 69           358.2377             Oxybutynin #> 70           256.1696        Diphenhydramine  ## Add a new spectra variable be$new_variable <- \"b\" be$new_variable #>  [1] \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" #> [20] \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" #> [39] \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" #> [58] \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\" \"b\"  ## Subset the backend be_sub <- be[c(3, 1)]  spectraNames(be) #>  [1] \"MCH00020\" \"MCH00002\" \"MCH00006\" \"MCH00009\" \"MCH00014\" \"MCH00019\" #>  [7] \"MCH00012\" \"MCH00003\" \"MCH00016\" \"MCH00001\" \"MCH00018\" \"MCH00007\" #> [13] \"MCH00013\" \"MCH00015\" \"MCH00008\" \"MCH00004\" \"MCH00005\" \"MCH00011\" #> [19] \"MCH00017\" \"MCH00010\" \"SM864952\" \"SM823851\" \"SM868004\" \"SM862204\" #> [25] \"SM834302\" \"SM810352\" \"SM847101\" \"SM861203\" \"SM839603\" \"SM829401\" #> [31] \"SM814501\" \"SM858902\" \"SM850104\" \"SM854403\" \"SM836003\" \"SM821703\" #> [37] \"SM880602\" \"SM868101\" \"SM851552\" \"SM804503\" \"SM848503\" \"SM842251\" #> [43] \"SM817703\" \"SM847302\" \"SM805801\" \"SM820101\" \"SM816753\" \"SM805001\" #> [49] \"SM838051\" \"SM812904\" \"SM840401\" \"SM812701\" \"SM861901\" \"SM874401\" #> [55] \"SM838502\" \"SM857001\" \"SM858203\" \"SM847702\" \"SM883903\" \"SM818403\" #> [61] \"SM871101\" \"SM842156\" \"SM841901\" \"SM854306\" \"SM878551\" \"SM834451\" #> [67] \"SM855703\" \"SM882851\" \"SM849703\" \"SM858801\" spectraNames(be_sub) #> [1] \"MCH00006\" \"MCH00020\""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/hidden_aliases.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal page for hidden aliases — hidden_aliases","title":"Internal page for hidden aliases — hidden_aliases","text":"S4 methods require documentation entry clutter index.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/metaDataBlocks.html","id":null,"dir":"Reference","previous_headings":"","what":"Metadata blocks to be read — metaDataBlocks","title":"Metadata blocks to be read — metaDataBlocks","text":"metaDataBlocks returns data.frame MassBank metadata blocks whether imported default MassBank text files.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/metaDataBlocks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Metadata blocks to be read — metaDataBlocks","text":"","code":"metaDataBlocks()"},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/metaDataBlocks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Metadata blocks to be read — metaDataBlocks","text":"data.frame metadata blocks.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/metaDataBlocks.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Metadata blocks to be read — metaDataBlocks","text":"Michael Witting","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/reference/metaDataBlocks.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Metadata blocks to be read — metaDataBlocks","text":"","code":"metaDataBlocks() #>   metadata  read #> 1       ac FALSE #> 2       ch FALSE #> 3       sp FALSE #> 4       ms FALSE #> 5   record FALSE #> 6       pk FALSE #> 7  comment FALSE"},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-7","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.3","title":"MsBackendMassbank 1.7","text":"Add support EAD parameter.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-7-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.2","title":"MsBackendMassbank 1.7","text":"Avoid export retention time data available.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-7-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.1","title":"MsBackendMassbank 1.7","text":"Run full test suite Spectra package validate MsBackend implementations.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-3","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.5","title":"MsBackendMassbank 1.3","text":"Add parameter columns peaksData.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-3-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.4","title":"MsBackendMassbank 1.3","text":"Import use spectraVariableMapping method Spectra.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-3-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.3","title":"MsBackendMassbank 1.3","text":"Map comment spectra variable.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-3-3","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.2","title":"MsBackendMassbank 1.3","text":"Use addition unit tests Spectra package. Add filterPrecursorMzValues filterPrecursorMzRange.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-3-4","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.1","title":"MsBackendMassbank 1.3","text":"MsBackendMassbankSql extends Spectra::MsBackendCached re-use general caching mechanism provided backend.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.4","title":"MsBackendMassbank 1.1","text":"Fix wrong database column name collision energy.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-1-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.3","title":"MsBackendMassbank 1.1","text":"Change SQL queries increase performance.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-1-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.2","title":"MsBackendMassbank 1.1","text":"Fix bug show,MsBackendMassbankSql.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-1-1-3","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.1","title":"MsBackendMassbank 1.1","text":"Cache precursor m/z allow faster queries spectral matching.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-0-99","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.4","title":"MsBackendMassbank 0.99","text":"Fix issue selectSpectraVariables,MsBackendMassbankSql fail subsetted single variable/column @localData issue #29","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-0-99-1","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.3","title":"MsBackendMassbank 0.99","text":"Drop names peaksData.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-0-99-2","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.2","title":"MsBackendMassbank 0.99","text":"Minor updates changes requested package review process.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-0-99-3","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.1","title":"MsBackendMassbank 0.99","text":"Directly call package internal functions using ::: used within bplapply avoid errors Windows.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMassbank/news/index.html","id":"changes-in-0-99-4","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.0","title":"MsBackendMassbank 0.99","text":"Prepare Bioconductor submission.","code":""}]
