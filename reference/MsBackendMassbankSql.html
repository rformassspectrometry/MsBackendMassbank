<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MS backend accessing the MassBank MySQL database — MsBackendMassbankSql • MsBackendMassbank</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MS backend accessing the MassBank MySQL database — MsBackendMassbankSql"><meta name="description" content='The MsBackendMassbankSql provides access to mass spectrometry data from
MassBank by directly accessing its
MySQL/MariaDb database. In addition it supports adding new spectra variables
or locally changing spectra variables provided by MassBank (without
changing the original values in the database).
Note that MsBackendMassbankSql requires a local installation of the
MassBank database since direct database access is not supported for the
main MassBank instance.
Also, some of the fields in the MassBank database are not directly compatible
with Spectra, such as the collision energy which is not available as a
numeric value. The collision energy as available in MassBank is reported as
spectra variable "collision_energy_text". Also, precursor m/z values
reported for some spectra can not be converted to a numeric and hence NA
is reported with the spectra variable precursorMz for these spectra. The
variable "precursor_mz_text" can be used to get the original precursor
m/z reported in MassBank.
Finally, MsBackendMassbankSql does not support parallel processing
because the database connection stored within the object can not be
shared acrcoss parallel processes. All functions on Spectra objects
with a MsBackendMassbankSql will (silently) disable parallel processing
even if the user provides a dedicated parallel processing setup with
the BPPARAM parameter.'><meta property="og:description" content='The MsBackendMassbankSql provides access to mass spectrometry data from
MassBank by directly accessing its
MySQL/MariaDb database. In addition it supports adding new spectra variables
or locally changing spectra variables provided by MassBank (without
changing the original values in the database).
Note that MsBackendMassbankSql requires a local installation of the
MassBank database since direct database access is not supported for the
main MassBank instance.
Also, some of the fields in the MassBank database are not directly compatible
with Spectra, such as the collision energy which is not available as a
numeric value. The collision energy as available in MassBank is reported as
spectra variable "collision_energy_text". Also, precursor m/z values
reported for some spectra can not be converted to a numeric and hence NA
is reported with the spectra variable precursorMz for these spectra. The
variable "precursor_mz_text" can be used to get the original precursor
m/z reported in MassBank.
Finally, MsBackendMassbankSql does not support parallel processing
because the database connection stored within the object can not be
shared acrcoss parallel processes. All functions on Spectra objects
with a MsBackendMassbankSql will (silently) disable parallel processing
even if the user provides a dedicated parallel processing setup with
the BPPARAM parameter.'><meta property="og:image" content="https://rformassspectrometry.github.io/MsBackendMassbank/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MsBackendMassbank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.13.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/MsBackendMassbank.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/MsBackendMassbank/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>MS backend accessing the MassBank MySQL database</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsBackendMassbank/blob/main/R/MsBackendMassbankSql-functions.R" class="external-link"><code>R/MsBackendMassbankSql-functions.R</code></a>, <a href="https://github.com/RforMassSpectrometry/MsBackendMassbank/blob/main/R/MsBackendMassbankSql.R" class="external-link"><code>R/MsBackendMassbankSql.R</code></a></small>
      <div class="d-none name"><code>MsBackendMassbankSql.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>MsBackendMassbankSql</code> provides access to mass spectrometry data from
<a href="https://massbank.eu/MassBank/" class="external-link">MassBank</a> by directly accessing its
MySQL/MariaDb database. In addition it supports adding new spectra variables
or <em>locally</em> changing spectra variables provided by MassBank (without
changing the original values in the database).</p>
<p>Note that <code>MsBackendMassbankSql</code> requires a local installation of the
MassBank database since direct database access is not supported for the
<em>main</em> MassBank instance.</p>
<p>Also, some of the fields in the MassBank database are not directly compatible
with <code>Spectra</code>, such as the <em>collision energy</em> which is not available as a
numeric value. The collision energy as available in MassBank is reported as
spectra variable <code>"collision_energy_text"</code>. Also, precursor m/z values
reported for some spectra can not be converted to a <code>numeric</code> and hence <code>NA</code>
is reported with the spectra variable <code>precursorMz</code> for these spectra. The
variable <code>"precursor_mz_text"</code> can be used to get the <em>original</em> precursor
m/z reported in MassBank.</p>
<p>Finally, <code>MsBackendMassbankSql</code> does <strong>not support</strong> parallel processing
because the database connection stored within the object can not be
shared acrcoss parallel processes. All functions on <code>Spectra</code> objects
with a <code>MsBackendMassbankSql</code> will (silently) disable parallel processing
even if the user provides a dedicated parallel processing setup with
the <code>BPPARAM</code> parameter.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MsBackendMassbankSql</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">backendInitialize</span><span class="op">(</span><span class="va">object</span>, <span class="va">dbcon</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">peaksData</span><span class="op">(</span><span class="va">object</span>, columns <span class="op">=</span> <span class="fu">peaksVariables</span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">dataStorage</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">intensity</span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">mz</span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">reset</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">spectraData</span><span class="op">(</span><span class="va">object</span>, columns <span class="op">=</span> <span class="fu">spectraVariables</span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">spectraNames</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">spectraNames</span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">tic</span><span class="op">(</span><span class="va">object</span>, initial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">...</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql,ANY'</span></span>
<span><span class="fu">extractByIndex</span><span class="op">(</span><span class="va">object</span>, <span class="va">i</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu">compounds</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">compounds</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">precScanNum</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'MsBackendMassbankSql'</span></span>
<span><span class="fu">backendBpparam</span><span class="op">(</span><span class="va">object</span>, BPPARAM <span class="op">=</span> <span class="fu">bpparam</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Object extending <code>MsBackendMassbankSql</code>.</p></dd>


<dt id="arg-dbcon">dbcon<a class="anchor" aria-label="anchor" href="#arg-dbcon"></a></dt>
<dd><p>For <code>backendInitialize,MsBackendMassbankSql</code>: SQL database
connection to the MassBank (MariaDb) database.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments.</p></dd>


<dt id="arg-columns">columns<a class="anchor" aria-label="anchor" href="#arg-columns"></a></dt>
<dd><p>For <code>spectraData</code> accessor: optional <code>character</code> with column
names (spectra variables) that should be included in the
returned <code>DataFrame</code>. By default, all columns are returned.
For <code>peaksData</code> accessor: optional <code>character</code> with requested columns in
the individual <code>matrix</code> of the returned <code>list</code>. Use
<code>peaksVariables(object)</code> for supported columns.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>replacement value for <code>&lt;-</code> methods. See individual
method description or expected data type.</p></dd>


<dt id="arg-initial">initial<a class="anchor" aria-label="anchor" href="#arg-initial"></a></dt>
<dd><p>For <code>tic</code>: <code>logical(1)</code> whether the initially
reported total ion current should be reported, or whether the
total ion current should be (re)calculated on the actual data
(<code>initial = FALSE</code>).</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Object extending <code>MsBackendMassbankSql</code>.</p></dd>


<dt id="arg-i">i<a class="anchor" aria-label="anchor" href="#arg-i"></a></dt>
<dd><p>For <code>[</code>: <code>integer</code>, <code>logical</code> or <code>character</code> to subset the object.</p></dd>


<dt id="arg-j">j<a class="anchor" aria-label="anchor" href="#arg-j"></a></dt>
<dd><p>For <code>[</code>: not supported.</p></dd>


<dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p>For <code>[</code>: not considered.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>name of the variable to replace for <code>&lt;-</code> methods. See individual
method description or expected data type.</p></dd>


<dt id="arg-bpparam">BPPARAM<a class="anchor" aria-label="anchor" href="#arg-bpparam"></a></dt>
<dd><p>for <code>backendBpparam</code>: <code>BiocParallel</code> parallel processing
setup. See <code>bpparam()</code> for more information.</p></dd>


<dt id="arg-spectravariables">spectraVariables<a class="anchor" aria-label="anchor" href="#arg-spectravariables"></a></dt>
<dd><p>For <code>selectSpectraVariables</code>: <code>character</code> with the
names of the spectra variables to which the backend should be subsetted.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>See documentation of respective function.</p>
    </div>
    <div class="section level2">
    <h2 id="supported-backend-functions">Supported Backend functions<a class="anchor" aria-label="anchor" href="#supported-backend-functions"></a></h2>



<p>The following functions are supported by the <code>MsBackendMassbankSql</code>.</p><ul><li><p><code>[</code>: subset the backend. Only subsetting by element (<em>row</em>/<code>i</code>) is
allowed</p></li>
<li><p><code>$</code>, <code>$&lt;-</code>: access or set/add a single spectrum variable (column) in the
backend.</p></li>
<li><p><code>acquisitionNum</code>: returns the acquisition number of each
spectrum. Returns an <code>integer</code> of length equal to the number of
spectra (with <code>NA_integer_</code> if not available).</p></li>
<li><p><code>peaksData</code> returns a <code>list</code> with the spectras' peak data. The length of
the list is equal to the number of spectra in <code>object</code>. Each element of
the list is a <code>matrix</code> with columns <code>"mz"</code> and <code>"intensity"</code>. For an empty
spectrum, a <code>matrix</code> with 0 rows and two columns (named <code>mz</code> and
<code>intensity</code>) is returned. Parameter <code>columns</code> allows to select which peaks
variables to return, but supports currently only <code>"mz"</code> and <code>"intensity"</code>.</p></li>
<li><p><code>backendBpparam</code>: whether the backend supports parallel processing. Takes
a <code>MsBackendMassbankSql</code> and a parallel processing setup (see <code>bpparam()</code>
for details) as input and <strong>always</strong> returns a <code>SerialParam()</code>. This
function can be used to test whether a provided parallel processing setup
is supported by the backend and returns the supported setup.</p></li>
<li><p><code>backendInitialize</code>: initialises the backend by retrieving the IDs of all
spectra in the database. Parameter <code>dbcon</code> with the connection to the
MassBank MySQL database is required.</p></li>
<li><p><code>dataOrigin</code>: gets a <code>character</code> of length equal to the number of spectra
in <code>object</code> with the <em>data origin</em> of each spectrum. This could e.g. be
the mzML file from which the data was read.</p></li>
<li><p><code>dataStorage</code>: returns <code>"&lt;MassBank&gt;"</code> for all spectra.</p></li>
<li><p><code>centroided</code>, <code>centroided&lt;-</code>: gets or sets the centroiding
information of the spectra. <code>centroided</code> returns a <code>logical</code>
vector of length equal to the number of spectra with <code>TRUE</code> if a
spectrum is centroided, <code>FALSE</code> if it is in profile mode and <code>NA</code>
if it is undefined. See also <code>isCentroided</code> for estimating from
the spectrum data whether the spectrum is centroided.  <code>value</code>
for <code>centroided&lt;-</code> is either a single <code>logical</code> or a <code>logical</code> of
length equal to the number of spectra in <code>object</code>.</p></li>
<li><p><code>collisionEnergy</code>, <code>collisionEnergy&lt;-</code>: gets or sets the
collision energy for all spectra in <code>object</code>. <code>collisionEnergy</code>
returns a <code>numeric</code> with length equal to the number of spectra
(<code>NA_real_</code> if not present/defined), <code>collisionEnergy&lt;-</code> takes a
<code>numeric</code> of length equal to the number of spectra in <code>object</code>. Note that
the collision energy description from MassBank are provided as spectra
variable <code>"collisionEnergyText"</code>.</p></li>
<li><p><code>intensity</code>: gets the intensity values from the spectra. Returns
a <code>NumericList()</code> of <code>numeric</code> vectors (intensity values for each
spectrum). The length of the <code>list</code> is equal to the number of
<code>spectra</code> in <code>object</code>.</p></li>
<li><p><code>ionCount</code>: returns a <code>numeric</code> with the sum of intensities for
each spectrum. If the spectrum is empty (see <code>isEmpty</code>),
<code>NA_real_</code> is returned.</p></li>
<li><p><code>isCentroided</code>: a heuristic approach assessing if the spectra in
<code>object</code> are in profile or centroided mode. The function takes
the <code>qtl</code> th quantile top peaks, then calculates the difference
between adjacent m/z value and returns <code>TRUE</code> if the first
quartile is greater than <code>k</code>. (See <code>Spectra:::.isCentroided</code> for
the code.)</p></li>
<li><p><code>isEmpty</code>: checks whether a spectrum in <code>object</code> is empty
(i.e. does not contain any peaks). Returns a <code>logical</code> vector of
length equal number of spectra.</p></li>
<li><p><code>isolationWindowLowerMz</code>, <code>isolationWindowLowerMz&lt;-</code>: gets or sets the
lower m/z boundary of the isolation window.</p></li>
<li><p><code>isolationWindowTargetMz</code>, <code>isolationWindowTargetMz&lt;-</code>: gets or sets the
target m/z of the isolation window.</p></li>
<li><p><code>isolationWindowUpperMz</code>, <code>isolationWindowUpperMz&lt;-</code>: gets or sets the
upper m/z boundary of the isolation window.</p></li>
<li><p><code>isReadOnly</code>: returns a <code>logical(1)</code> whether the backend is <em>read
only</em> or does allow also to write/update data.</p></li>
<li><p><code>length</code>: returns the number of spectra in the object.</p></li>
<li><p><code>lengths</code>: gets the number of peaks (m/z-intensity values) per
spectrum.  Returns an <code>integer</code> vector (length equal to the
number of spectra). For empty spectra, <code>0</code> is returned.</p></li>
<li><p><code>msLevel</code>: gets the spectra's MS level. Returns an <code>integer</code>
vector (of length equal to the number of spectra) with the MS
level for each spectrum (or <code>NA_integer_</code> if not available).</p></li>
<li><p><code>mz</code>: gets the mass-to-charge ratios (m/z) from the
spectra. Returns a <code>NumericList()</code> or length equal to the number of
spectra, each element a <code>numeric</code> vector with the m/z values of
one spectrum.</p></li>
<li><p><code>polarity</code>, <code>polarity&lt;-</code>: gets or sets the polarity for each
spectrum.  <code>polarity</code> returns an <code>integer</code> vector (length equal
to the number of spectra), with <code>0</code> and <code>1</code> representing negative
and positive polarities, respectively. <code>polarity&lt;-</code> expects an
integer vector of length 1 or equal to the number of spectra.</p></li>
<li><p><code>precursorCharge</code>, <code>precursorIntensity</code>, <code>precursorMz</code>,
<code>precScanNum</code>, <code>precAcquisitionNum</code>: get the charge (<code>integer</code>),
intensity (<code>numeric</code>), m/z (<code>numeric</code>), scan index (<code>integer</code>)
and acquisition number (<code>interger</code>) of the precursor for MS level
2 and above spectra from the object. Returns a vector of length equal to
the number of spectra in <code>object</code>. <code>NA</code> are reported for MS1
spectra of if no precursor information is available.</p></li>
<li><p><code>reset</code>: restores the backend to its original state, i.e. deletes all
locally modified data and reinitializes the backend to the full data
available in the database.</p></li>
<li><p><code>rtime</code>, <code>rtime&lt;-</code>: gets or sets the retention times for each
spectrum (in seconds). <code>rtime</code> returns a <code>numeric</code> vector (length equal to
the number of spectra) with the retention time for each spectrum.
<code>rtime&lt;-</code> expects a numeric vector with length equal to the
number of spectra.</p></li>
<li><p><code>scanIndex</code>: returns an <code>integer</code> vector with the <em>scan index</em>
for each spectrum. This represents the relative index of the
spectrum within each file. Note that this can be different to the
<code>acquisitionNum</code> of the spectrum which is the index of the
spectrum as reported in the mzML file.</p></li>
<li><p><code>selectSpectraVariables</code>: reduces the information within the backend to
the selected spectra variables.</p></li>
<li><p><code>smoothed</code>,<code>smoothed&lt;-</code>: gets or sets whether a spectrum is
<em>smoothed</em>. <code>smoothed</code> returns a <code>logical</code> vector of length equal
to the number of spectra. <code>smoothed&lt;-</code> takes a <code>logical</code> vector
of length 1 or equal to the number of spectra in <code>object</code>.</p></li>
<li><p><code>spectraData</code>: gets general spectrum metadata (annotation, also called
header).  <code>spectraData</code> returns a <code>DataFrame</code>. Note that replacing the
spectra data with <code>spectraData&lt;-</code> is not supported.</p></li>
<li><p><code>spectraNames</code>: returns a <code>character</code> vector with the names of
the spectra in <code>object</code>.</p></li>
<li><p><code>spectraVariables</code>: returns a <code>character</code> vector with the
available spectra variables (columns, fields or attributes)
available in <code>object</code>. This should return <strong>all</strong> spectra variables which
are present in <code>object</code>, also <code>"mz"</code> and <code>"intensity"</code> (which are by
default not returned by the <code>spectraVariables,Spectra</code> method).</p></li>
<li><p><code>tic</code>: gets the total ion current/count (sum of signal of a
spectrum) for all spectra in <code>object</code>. By default, the value
reported in the original raw data file is returned. For an empty
spectrum, <code>NA_real_</code> is returned.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="not-supported-backend-functions">Not supported Backend functions<a class="anchor" aria-label="anchor" href="#not-supported-backend-functions"></a></h2>



<p>The following functions are not supported by the <code>MsBackendMassbankSql</code> since
the original data can not be changed.</p>
<p><code>backendMerge</code>, <code>export</code>, <code>filterDataStorage</code>, <code>filterPrecursorScan</code>,
<code>peaksData&lt;-</code>, <code>filterAcquisitionNum</code>, <code>intensity&lt;-</code>, <code>mz&lt;-</code>, <code>precScanNum</code>,
<code>spectraData&lt;-</code>, <code>spectraNames&lt;-</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="retrieving-compound-annotations-for-spectra">Retrieving compound annotations for spectra<a class="anchor" aria-label="anchor" href="#retrieving-compound-annotations-for-spectra"></a></h2>



<p>While compound annotations are also provided <em>via</em> the <code>spectraVariables</code> of
the backend, it would also be possible to use the <code>compounds</code> function on
a <code>Spectra</code> object (that uses a <code>MsBackendMassbankSql</code> backend) to retrieve
compound annotations for the specific spectra.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a connection to a database with MassBank data - in the present</span></span></span>
<span class="r-in"><span><span class="co">## example we connect to a tiny SQLite database bundled in this package</span></span></span>
<span class="r-in"><span><span class="co">## as public access to the MassBank MySQL is not (yet) supported. See the</span></span></span>
<span class="r-in"><span><span class="co">## vignette for more information on how to install MassBank locally and</span></span></span>
<span class="r-in"><span><span class="co">## enable MySQL database connections</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"sql"</span>, <span class="st">"minimassbank.sqlite"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"MsBackendMassbank"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Given that we have the connection to a MassBank databas we can</span></span></span>
<span class="r-in"><span><span class="co">## initialize the backend:</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu">backendInitialize</span><span class="op">(</span><span class="fu">MsBackendMassbankSql</span><span class="op">(</span><span class="op">)</span>, dbcon <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMassbankSql with 70 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel precursorMz  polarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt;   &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           2         506         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA          NA         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA          NA         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          NA          NA         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...         ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66          2     185.028         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67          2     455.290         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68          2     253.051         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69          2     358.238         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70          2     256.170         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 42 more variables/columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Use  'spectraVariables' to list all of them.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Access MS level</span></span></span>
<span class="r-in"><span><span class="fu">msLevel</span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  2 NA NA NA NA  2 NA NA NA NA NA NA NA NA NA NA NA NA NA NA  2  2  2  2  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2</span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">msLevel</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  2 NA NA NA NA  2 NA NA NA NA NA NA NA NA NA NA NA NA NA NA  2  2  2  2  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51]  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Access m/z values</span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">mz</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NumericList of length 70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]] 146.760803 158.863541 174.988785 ... 470.057434 487.989319 585.88446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]] 22.99 23.07 23.19 38.98 53.15 60.08 ... 391.18 413.22 414.22 429.16 495.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]] 108.099566 152.005378 153.01824 ... 341.031964 409.06729 499.103447</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]] 137.0227 138.025605 139.034602 ... 304.271886 316.303106 352.234228</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]] 112.977759 205.053323 208.041128 ... 449.137152 671.1778 673.200866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]] 78.893929 183.011719 193.957916 ... 328.091949 408.010193 426.021942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]] 167.03389 168.040758 333.079965 ... 357.073039 365.040698 373.073473</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]] 195.09167 196.095033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]] 108.096149 152.004656 153.01824 ... 359.997563 409.065314 491.043775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]] 1278.12 1279.11 1279.18 1306.21 ... 2064.29 2091.32 2092.3 2136.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;60 more elements&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Access the full spectra data (including m/z and intensity values)</span></span></span>
<span class="r-in"><span><span class="fu">spectraData</span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DataFrame with 70 rows and 45 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       msLevel     rtime acquisitionNum scanIndex                             mz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;integer&gt; &lt;numeric&gt;      &lt;integer&gt; &lt;integer&gt;                  &lt;NumericList&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           2        NA             NA        NA    146.761,158.864,174.989,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA        NA             NA        NA          22.99,23.07,23.19,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA        NA             NA        NA    108.100,152.005,153.018,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA        NA             NA        NA    137.023,138.026,139.035,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          NA        NA             NA        NA    112.978,205.053,208.041,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...            ...       ...                            ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66          2        NA             NA        NA                        185.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67          2        NA             NA        NA    58.0653,77.0386,79.0543,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68          2        NA             NA        NA    132.021,133.029,135.009,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69          2        NA             NA        NA    53.0388,54.0340,55.0544,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70          2        NA             NA        NA  88.0757,151.0540,152.0620,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                intensity dataStorage  dataOrigin centroided</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            &lt;NumericList&gt; &lt;character&gt; &lt;character&gt;  &lt;logical&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     0.980184,938.145447, 56.718353,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     3173,2266, 880,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                 2809,119550, 91935,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               157703, 23566,  5190,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                     5686, 927, 756,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                                  ...         ...         ...        ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66                              34967548  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67           9143284, 341391,5278218,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68         82825.8,290504.6,301494.3,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69         1568742,19224644, 4676170,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70          678846,  403851,11111366,...  &lt;MassBank&gt;          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      smoothed  polarity precScanNum precursorMz precursorIntensity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;logical&gt; &lt;integer&gt;   &lt;integer&gt;   &lt;numeric&gt;          &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA         0          NA         506                408</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA         0          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA         1          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          NA         0          NA          NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...       ...       ...         ...         ...                ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66         NA         0          NA     185.028            185.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67         NA         1          NA     455.290            455.290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68         NA         0          NA     253.051            253.051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69         NA         1          NA     358.238            358.237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70         NA         1          NA     256.170            256.169</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     precursorCharge collisionEnergy isolationWindowLowerMz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;integer&gt;       &lt;numeric&gt;              &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...             ...             ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               NA              NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     isolationWindowTargetMz isolationWindowUpperMz spectrum_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   &lt;numeric&gt;              &lt;numeric&gt; &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                        NA                     NA    MCH00020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        NA                     NA    MCH00002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        NA                     NA    MCH00006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        NA                     NA    MCH00009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                        NA                     NA    MCH00014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                     ...                    ...         ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66                       NA                     NA    SM834451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67                       NA                     NA    SM855703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68                       NA                     NA    SM882851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69                       NA                     NA    SM849703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70                       NA                     NA    SM858801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              spectrum_name                   date                authors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;character&gt;            &lt;character&gt;            &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Adenosine 5'-triphos.. 2016.01.19 (Created .. Yoshikuni K, Tajiri ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Gentisic acid; MALDI.. 2016.01.19 (Created .. Wada Y, Osaka Medica..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Gentisic acid; MALDI.. 2016.01.19 (Created .. Wada Y, Osaka Medica..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   5-Methoxysalicylic a.. 2016.01.19 (Created .. Wada Y, Osaka Medica..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Sinapic acid; MALDI-.. 2016.01.19 (Created .. Wada Y, Osaka Medica..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                    ...                    ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66  m-Xylene-4-sulfonic ..             2016.12.12 Krauss M, Schymanski..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67  Verapamil; LC-ESI-QF..             2016.12.12 Krauss M, Schymanski..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68  Daidzein; LC-ESI-QFT..             2016.12.12 Krauss M, Schymanski..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69  Oxybutynin; LC-ESI-Q..             2016.12.12 Krauss M, Schymanski..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70  Diphenhydramine; LC-.. 2019.11.20 (Created .. Krauss M, Schymanski..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         license              copyright            publication</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;character&gt;            &lt;character&gt;            &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      CC BY-SA                     NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      CC BY-SA                     NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      CC BY-SA                     NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      CC BY-SA                     NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      CC BY-SA                     NA                     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...         ...                    ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70        CC BY Copyright (C) 2016 U.. Schymanski, E. L.; R..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     splash compound_id      adduct  ionization</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;character&gt;   &lt;integer&gt; &lt;character&gt; &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   splash10-0a4i-000090..           1      [M-H]-          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   splash10-004r-191300..           2          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   splash10-0udi-090200..           3          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   splash10-0fri-093000..           4          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   splash10-006t-019080..           5          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                    ...         ...         ...         ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66  splash10-000i-090000..          66      [M-H]-         ESI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67  splash10-066r-090030..          67      [M+H]+         ESI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68  splash10-0udi-009000..          68      [M-H]-         ESI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69  splash10-0a4i-860900..          69      [M+H]+         ESI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70  splash10-014i-090000..          70      [M+H]+         ESI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ionization_voltage fragmentation_mode collision_energy_text</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;character&gt;        &lt;character&gt;           &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                   NA                 NA                    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                   NA                 NA                    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                   NA                 NA                    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                   NA                 NA                    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                   NA                 NA                    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                ...                ...                   ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66                  NA                HCD         35  (nominal)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67                  NA                HCD         35  (nominal)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68                  NA                HCD         35  (nominal)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69                  NA                HCD         35  (nominal)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70                  NA                HCD         35  (nominal)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 instrument instrument_type       formula exactmass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;character&gt;     &lt;character&gt;   &lt;character&gt; &lt;numeric&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   LTQ Orbitrap XL, The..     LC-ESI-ITFT C10H16N5O13P3   506.996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Voyager DE-PRO, Appl..       MALDI-TOF        C7H6O4   154.027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Voyager DE-PRO, Appl..       MALDI-TOF        C7H6O4   154.027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Voyager DE-PRO, Appl..       MALDI-TOF        C8H8O4   168.042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Voyager DE-PRO, Appl..       MALDI-TOF      C11H12O5   224.068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                    ...             ...           ...       ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66  Q Exactive Plus Orbi..      LC-ESI-QFT      C8H10O3S   186.035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67  Q Exactive Plus Orbi..      LC-ESI-QFT    C27H38N2O4   454.283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68  Q Exactive Plus Orbi..      LC-ESI-QFT      C15H10O4   254.058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69  Q Exactive Plus Orbi..      LC-ESI-QFT     C22H31NO3   357.230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70  Q Exactive Plus Orbi..      LC-ESI-QFT      C17H21NO   255.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     smiles                  inchi               inchikey</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;character&gt;            &lt;character&gt;            &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Nc(n3)c(n2)c(nc3)n(c.. InChI=1S/C10H16N5O13.. ZKHQWZAMYRWXGA-KQYNX..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Oc(c1)cc(C(O)=O)c(O)c1 InChI=1S/C7H6O4/c8-4.. WXTMDXOMEHJXQO-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Oc(c1)cc(C(O)=O)c(O)c1 InChI=1S/C7H6O4/c8-4.. WXTMDXOMEHJXQO-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   COc(c1)cc(C(O)=O)c(O.. InChI=1S/C8H8O4/c1-1.. IZZIWIAOVZOBLF-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   COC1=CC(=CC(=C1O)OC).. InChI=1S/C11H12O5/c1.. PCMORTLOPMLEFB-ONEGZ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                    ...                    ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66  Cc1ccc(c(c1)C)S(=O)(.. InChI=1S/C8H10O3S/c1.. CHZLVSBMXZSPNN-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67  COc1ccc(CCN(C)CCCC(C.. InChI=1S/C27H38N2O4/.. SGTNSNPWRIOYBX-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68  OC1=CC=C(C=C1)C1=COC.. InChI=1S/C15H10O4/c1.. ZQSIJRDFPHDXIC-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69  CCN(CC)CC#CCOC(=O)C(.. InChI=1S/C22H31NO3/c.. XIQVNETUBQGFHX-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70  CN(C)CCOC(c1ccccc1)c.. InChI=1S/C17H21NO/c1.. ZZVUWRFHKOJYTH-UHFFF..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             cas     pubchem</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;character&gt; &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       56-65-5    CID:5957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            NA    CID:3469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            NA    CID:3469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            NA   CID:75787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      530-59-6  CID:637775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...         ...         ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66      88-61-9    CID:6938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67      52-53-9    CID:2520</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68     486-66-8 CID:5281708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69    5633-20-5    CID:4634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70      58-73-1    CID:3100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                        synonym</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                &lt;CharacterList&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                   Adenosine 5'-triphos..,ATP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                         2,5-Dihydroxybenzoic..,Gentisic acid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                     2,5-Dihydroxybenzoic..,DHB,Gentisic acid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                      5-Methoxysalicylic a..,DHBs (Super DHB)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Sinapic acid,3,5-dimethoxy-4-hydr..,3-(4-hydroxy-3,5-dim..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...                                                        ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               m-Xylene-4-sulfonic ..,2,4-dimethylbenzenes..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67                            Verapamil,2-(3,4-dimethoxyphen..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68                             Daidzein,7-hydroxy-3-(4-hydro..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69                           Oxybutynin,4-(diethylamino)but-..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70                      Diphenhydramine,2-benzhydryloxy-N,N-..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     precursor_mz_text          compound_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;character&gt;            &lt;character&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          506.000000 Adenosine 5'-triphos..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  NA 2,5-Dihydroxybenzoic..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                  NA 2,5-Dihydroxybenzoic..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                  NA 5-Methoxysalicylic a..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                  NA           Sinapic acid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...               ...                    ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66           185.0278 m-Xylene-4-sulfonic ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67           455.2904              Verapamil</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68           253.0506               Daidzein</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69           358.2377             Oxybutynin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70           256.1696        Diphenhydramine</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Add a new spectra variable</span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">new_variable</span> <span class="op">&lt;-</span> <span class="st">"b"</span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">new_variable</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20] "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39] "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [58] "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b" "b"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Subset the backend</span></span></span>
<span class="r-in"><span><span class="va">be_sub</span> <span class="op">&lt;-</span> <span class="va">be</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">spectraNames</span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "MCH00020" "MCH00002" "MCH00006" "MCH00009" "MCH00014" "MCH00019"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "MCH00012" "MCH00003" "MCH00016" "MCH00001" "MCH00018" "MCH00007"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "MCH00013" "MCH00015" "MCH00008" "MCH00004" "MCH00005" "MCH00011"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "MCH00017" "MCH00010" "SM864952" "SM823851" "SM868004" "SM862204"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "SM834302" "SM810352" "SM847101" "SM861203" "SM839603" "SM829401"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] "SM814501" "SM858902" "SM850104" "SM854403" "SM836003" "SM821703"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] "SM880602" "SM868101" "SM851552" "SM804503" "SM848503" "SM842251"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43] "SM817703" "SM847302" "SM805801" "SM820101" "SM816753" "SM805001"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] "SM838051" "SM812904" "SM840401" "SM812701" "SM861901" "SM874401"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [55] "SM838502" "SM857001" "SM858203" "SM847702" "SM883903" "SM818403"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] "SM871101" "SM842156" "SM841901" "SM854306" "SM878551" "SM834451"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [67] "SM855703" "SM882851" "SM849703" "SM858801"</span>
<span class="r-in"><span><span class="fu">spectraNames</span><span class="op">(</span><span class="va">be_sub</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MCH00006" "MCH00020"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by RforMassSpectrometry Package Maintainer, Michael Witting, Johannes Rainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

