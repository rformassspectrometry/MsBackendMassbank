<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MS data backend for mgf files — MsBackendMassbank • MsBackendMassbank</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="MS data backend for mgf files — MsBackendMassbank" />
<meta property="og:description" content="The MsBackendMassbank class supports import of MS/MS spectra data from
MS/MS spectrum data from Massbank
files. After initial import, the full MS data is kept in
memory. MsBackendMassbank extends the MsBackendDataFrame() backend
directly and supports thus the applyProcessing() function to make
data manipulations persistent. The backend does however not
support export to mgf files yet.
New objects are created with the MsBackendMassbank function. The
backendInitialize method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) mgf
files.  Optional parameter nonStop allows to specify whether the
import returns with an error if one of the xml files lacks required
data, such as mz and intensity values (default nonStop = FALSE), or whether only affected file(s) is(are) skipped and a
warning is shown (nonStop = TRUE). Note that any other error
(such as xml import error) will abort import regardless of
parameter nonStop." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MsBackendMassbank</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/MsBackendMassbank.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/michaelwitting/MsBackendMassbank/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MS data backend for mgf files</h1>
    <small class="dont-index">Source: <a href='https://github.com/michaelwitting/MsBackendMassbank/blob/master/R/MsBackendMassbank.R'><code>R/MsBackendMassbank.R</code></a></small>
    <div class="hidden name"><code>MsBackendMassbank.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>MsBackendMassbank</code> class supports import of MS/MS spectra data from
MS/MS spectrum data from <a href='https://github.com/MassBank/MassBank-data'>Massbank</a>
files. After initial import, the full MS data is kept in
memory. <code>MsBackendMassbank</code> extends the <code>MsBackendDataFrame()</code> backend
directly and supports thus the <code>applyProcessing()</code> function to make
data manipulations persistent. The backend does however not
support export to mgf files yet.</p>
<p>New objects are created with the <code>MsBackendMassbank</code> function. The
<code>backendInitialize</code> method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) mgf
files.  Optional parameter <code>nonStop</code> allows to specify whether the
import returns with an error if one of the xml files lacks required
data, such as <code>mz</code> and <code>intensity</code> values (default <code>nonStop = FALSE</code>), or whether only affected file(s) is(are) skipped and a
warning is shown (<code>nonStop = TRUE</code>). Note that any other error
(such as xml import error) will abort import regardless of
parameter <code>nonStop</code>.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for MsBackendMassbank</span>
<span class='fu'>backendInitialize</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>files</span>,
  metaBlocks <span class='op'>=</span> <span class='fu'><a href='metaDataBlocks.html'>metaDataBlocks</a></span><span class='op'>(</span><span class='op'>)</span>,
  nonStop <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>,
  BPPARAM <span class='op'>=</span> <span class='fu'>bpparam</span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>MsBackendMassbank</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>spectraVariableMapping</span><span class='op'>(</span>format <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Massbank"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># S4 method for MsBackendMassbank</span>
<span class='fu'>export</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>x</span>, file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>, mapping <span class='op'>=</span> <span class='fu'>spectraVariableMapping</span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>Instance of <code>MsBackendMassbank</code> class.</p></td>
    </tr>
    <tr>
      <th>files</th>
      <td><p><code>character</code> with the (full) file name(s) of the mgf file(s)
from which MS/MS data should be imported.</p></td>
    </tr>
    <tr>
      <th>metaBlocks</th>
      <td><p><code>data.frame</code> data frame indicating which metadata shall
be read Default is <code><a href='metaDataBlocks.html'>metaDataBlocks()</a></code>.</p></td>
    </tr>
    <tr>
      <th>nonStop</th>
      <td><p><code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> whether import should be stopped if an
xml file does not contain all required fields. Defaults to
<code>nonStop = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently ignored.</p></td>
    </tr>
    <tr>
      <th>BPPARAM</th>
      <td><p>Parameter object defining the parallel processing
setup to import data in parallel. Defaults to <code>BPPARAM = bpparam()</code>. See <code>bpparam()</code> for more information.</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>for <code>spectraVariableMapping</code>: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> defining the
format to be used. Currently only <code>format = "Massbank"</code> is supported.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p><code>Spectra()</code> object that should be exported.</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p>for <code>export</code>: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> defining the output file.</p></td>
    </tr>
    <tr>
      <th>mapping</th>
      <td><p>for <code>export</code>: named <code>character</code> vector
allowing to specify how fields from the Massbank file should be renamed.
Names are supposed to be the spectra variable name and values of the
vector the field names in the Massbank file. See output of
<code>spectraVariableMapping()</code> for the expected format.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Michael Witting</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Create an MsBackendMassbank backend and import data from test xml files.</span>
<span class='va'>fls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, package <span class='op'>=</span> <span class='st'>"MsBackendMassbank"</span><span class='op'>)</span>,
    full.names <span class='op'>=</span> <span class='cn'>TRUE</span>, pattern <span class='op'>=</span> <span class='st'>"txt$"</span><span class='op'>)</span>
<span class='va'>be</span> <span class='op'>&lt;-</span> <span class='fu'>backendInitialize</span><span class='op'>(</span><span class='fu'>MsBackendMassbank</span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>fls</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Start data import from 8 files ... </span></div><div class='output co'>#&gt; <span class='message'>done</span></div><div class='input'><span class='va'>be</span>
</div><div class='output co'>#&gt; MsBackendMassbank with 10 spectra
#&gt;      msLevel     rtime scanIndex
#&gt;    &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;
#&gt; 1          2        NA         1
#&gt; 2          2    142.14         1
#&gt; 3          2    142.14         1
#&gt; 4          2    142.14         1
#&gt; 5          2    142.14         1
#&gt; 6          2    142.14         1
#&gt; 7          2    142.14         1
#&gt; 8          2    143.94         1
#&gt; 9          2    143.94         1
#&gt; 10         2    143.94         1
#&gt;  ... 28 more variables/columns.</div><div class='input'>
<span class='va'>be</span><span class='op'>$</span><span class='va'>msLevel</span>
</div><div class='output co'>#&gt;  [1] 2 2 2 2 2 2 2 2 2 2</div><div class='input'><span class='va'>be</span><span class='op'>$</span><span class='va'>intensity</span>
</div><div class='output co'>#&gt; NumericList of length 10
#&gt; [["intensity"]] 12461 2208 2394 40390 2816 3122 ... 6937 2914 6059 1871 9233
#&gt; [[""]] 646 980 2114 20052 1248 7628 2036 494048 75708
#&gt; [[""]] 10186 142 142 750 138 490 126 ... 14266 1478 1600 16504 1446 109762
#&gt; [[""]] 324 184 138 3770 500 800 7214 3238 ... 2802 206 898 162 166 814 250 1840
#&gt; [["intensity"]] 646 980 2114 20052 1248 7628 2036 494048 75708
#&gt; [["intensity"]] 10186 142 142 750 138 490 ... 14266 1478 1600 16504 1446 109762
#&gt; [["intensity"]] 324 184 138 3770 500 800 7214 ... 206 898 162 166 814 250 1840
#&gt; [["intensity"]] 150 200 32 232 80 12162
#&gt; [["intensity"]] 460 3630 658 74 28 190 44 142 50 52 634
#&gt; [["intensity"]] 282 424</div><div class='input'><span class='va'>be</span><span class='op'>$</span><span class='va'>mz</span>
</div><div class='output co'>#&gt; NumericList of length 10
#&gt; [["mz"]] 84.1 105.1 107.1 114.1 115.1 119.1 ... 393.3 396.3 410.3 411.3 414.3
#&gt; [[""]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965
#&gt; [[""]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07
#&gt; [[""]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06
#&gt; [["mz"]] 74.0233 132.0807 144.0805 146.0598 ... 170.0597 188.0699 205.0965
#&gt; [["mz"]] 74.0232 77.0381 86.0027 91.0539 ... 160.0947 170.0596 171.0625 188.07
#&gt; [["mz"]] 53.0019 53.0383 63.0225 65.0381 ... 158.0817 159.0921 160.0755 170.06
#&gt; [["mz"]] 72.0095 116.0517 117.0554 159.0935 186.0558 203.0826
#&gt; [["mz"]] 72.0094 74.0253 116.0511 117.0539 ... 162.0307 186.0548 203.0818
#&gt; [["mz"]] 74.0253 116.0508</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael Witting, Johannes Rainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


